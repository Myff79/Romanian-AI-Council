!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Romanian AI Council - Simple Version</title>
    <style>
        body { 
            background: #1a1a2e; 
            color: white; 
            font-family: Arial, sans-serif; 
            margin: 0;
            padding: 20px;
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
        }
        h1 {
            text-align: center;
            color: #FFD700;
            margin-bottom: 30px;
        }
        .controls { 
            margin-bottom: 30px; 
            text-align: center;
        }
        #issue {
            width: 400px;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #3498db;
            background: #16213e;
            color: white;
            margin-right: 10px;
        }
        #runBtn {
            padding: 10px 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #runBtn:hover {
            background: #2980b9;
        }
        .council-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
            gap: 20px; 
            margin-bottom: 30px;
        }
        .member-card { 
            background: #16213e; 
            padding: 20px; 
            border-radius: 10px; 
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        .member-card.thinking {
            border-color: #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }
        .member-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .profile-img { 
            width: 50px; 
            height: 50px; 
            border-radius: 50%; 
            background: #3498db; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-weight: bold;
            margin-right: 15px;
            font-size: 18px;
            overflow: hidden;
            border: 3px solid rgba(255, 255, 255, 0.3);
            position: relative;
        }
        .profile-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        .profile-img .initials {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            font-size: 16px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .profile-img:hover .initials {
            opacity: 1;
        }
        .member-info h3 {
            margin: 0;
            color: #FFD700;
        }
        .member-info .role {
            color: #bbb;
            font-size: 14px;
        }
        .member-info .bio {
            color: #ccc;
            font-size: 12px;
            margin-top: 5px;
        }
        .response {
            margin-top: 15px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            border-left: 3px solid #3498db;
            display: none;
        }
        .response.show {
            display: block;
        }
        #decision { 
            margin-top: 30px; 
            padding: 20px;
            background: #16213e;
            border-radius: 10px;
            text-align: center;
            display: none;
        }
        #decision.show {
            display: block;
        }
        .decision-outcome {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .approve { color: #4CAF50; }
        .reject { color: #f44336; }
        .conditional { color: #FFD700; }
        #exportBtn {
            margin-top: 20px;
            padding: 10px 20px;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: none;
        }
        #exportBtn.show {
            display: inline-block;
        }
        .loading {
            text-align: center;
            color: #FFD700;
            font-style: italic;
        }
        
        /* Council Chairman */
        .chairman-section {
            background: linear-gradient(135deg, #002B7F, #1a1a2e);
            border: 2px solid #FFD700;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
            display: none;
        }
        .chairman-section.show {
            display: block;
        }
        .chairman-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 28px;
            margin: 0 auto 15px;
            border: 3px solid #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            overflow: hidden;
            position: relative;
        }
        .chairman-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        .chairman-avatar .initials {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.7);
            color: #FFD700;
            font-size: 24px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .chairman-avatar:hover .initials {
            opacity: 1;
        }
        .chairman-name {
            font-size: 24px;
            color: #FFD700;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .chairman-title {
            color: #ccc;
            font-style: italic;
            margin-bottom: 15px;
        }
        .chairman-status {
            padding: 10px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 8px;
            border-left: 4px solid #FFD700;
            margin-top: 15px;
        }

        /* Discussion Flow Animations */
        .discussion-container {
            position: relative;
            margin: 20px 0;
        }
        .discussion-line {
            position: absolute;
            height: 3px;
            background: linear-gradient(90deg, transparent, #FFD700, transparent);
            top: 50%;
            left: 0;
            right: 0;
            opacity: 0;
            animation: flowDiscussion 2s ease-in-out;
        }
        @keyframes flowDiscussion {
            0% { opacity: 0; transform: translateX(-100%); }
            50% { opacity: 1; transform: translateX(0%); }
            100% { opacity: 0; transform: translateX(100%); }
        }

        /* Cross-discussion highlights */
        .member-card.discussing {
            border-color: #27ae60;
            box-shadow: 0 0 15px rgba(39, 174, 96, 0.4);
        }
        .member-card.responding {
            border-color: #e67e22;
            box-shadow: 0 0 15px rgba(230, 126, 34, 0.4);
        }

        /* Discussion bubbles */
        .discussion-bubble {
            background: rgba(39, 174, 96, 0.1);
            border: 1px solid #27ae60;
            border-radius: 10px;
            padding: 10px;
            margin: 10px 0;
            font-size: 14px;
            font-style: italic;
            display: none;
        }
        .discussion-bubble.show {
            display: block;
            animation: fadeInBubble 0.5s ease-in;
        }
        @keyframes fadeInBubble {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* Discussion Transcript */
        .transcript-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            margin: 30px 0;
            padding: 20px;
            display: none;
        }
        .transcript-section.show {
            display: block;
            animation: fadeInSection 0.5s ease-in;
        }
        @keyframes fadeInSection {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .transcript-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            cursor: pointer;
            padding: 10px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 8px;
            transition: background 0.3s ease;
        }
        .transcript-header:hover {
            background: rgba(255, 215, 0, 0.15);
        }
        .transcript-title {
            color: #FFD700;
            font-size: 18px;
            font-weight: bold;
            margin-left: 10px;
        }
        .transcript-toggle {
            margin-left: auto;
            color: #FFD700;
            font-size: 16px;
            transition: transform 0.3s ease;
        }
        .transcript-toggle.expanded {
            transform: rotate(180deg);
        }
        .transcript-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
        }
        .transcript-content.expanded {
            max-height: 400px;
            overflow-y: auto;
        }
        .transcript-entry {
            display: flex;
            align-items: flex-start;
            margin: 15px 0;
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            border-left: 3px solid #27ae60;
            animation: slideInTranscript 0.5s ease-out;
        }
        @keyframes slideInTranscript {
            0% { opacity: 0; transform: translateX(-20px); }
            100% { opacity: 1; transform: translateX(0); }
        }
        .transcript-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            margin-right: 12px;
            flex-shrink: 0;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        .transcript-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .transcript-message {
            flex: 1;
        }
        .transcript-speaker {
            font-weight: bold;
            color: #FFD700;
            font-size: 14px;
            margin-bottom: 3px;
        }
        .transcript-text {
            color: #E0E6ED;
            font-size: 14px;
            line-height: 1.5;
            font-style: italic;
        }
        .transcript-phase {
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid #FFD700;
            border-radius: 8px;
            padding: 10px;
            margin: 20px 0 10px 0;
            text-align: center;
        }
        .transcript-phase-title {
            color: #FFD700;
            font-weight: bold;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèõÔ∏è Romanian Future Council</h1>
        
        <div class="controls">
            <input type="text" id="issue" placeholder="Enter policy issue (e.g., 4-day work week for government employees?)" />
            <button id="runBtn" onclick="runCouncil()">Run Council</button>
        </div>

        <!-- Council Chairman -->
        <div class="chairman-section" id="chairman">
            <div class="chairman-avatar">
                <img src="https://images.unsplash.com/photo-1556157382-97eda2d62296?w=150&h=150&fit=crop&crop=faces" alt="Mircea Codrescu" onerror="this.style.display='none'; this.nextElementSibling.style.opacity='1';">
                <div class="initials">MC</div>
            </div>
            <div class="chairman-name">Mircea Codrescu</div>
            <div class="chairman-title">Council Chairman & Final Arbiter</div>
            <div class="chairman-status" id="chairmanStatus">
                Ready to moderate council session...
            </div>
        </div>
        
        <div class="discussion-container" id="discussionFlow">
            <div class="discussion-line" id="discussionLine"></div>
        </div>
        
        <div class="council-grid" id="council">
            <!-- Council members will be populated here -->
        </div>

        <!-- Discussion Transcript -->
        <div class="transcript-section" id="transcript">
            <div class="transcript-header" onclick="toggleTranscript()">
                <span>üìù</span>
                <span class="transcript-title">Council Discussion Transcript</span>
                <span class="transcript-toggle" id="transcriptToggle">‚ñº</span>
            </div>
            <div class="transcript-content" id="transcriptContent">
                <div id="transcriptEntries">
                    <!-- Transcript entries will be added here dynamically -->
                </div>
            </div>
        </div>
        
        <div id="decision">
            <div id="decisionContent"></div>
            <button id="exportBtn" onclick="exportSession()">üìä Export Session</button>
        </div>
    </div>
    
    <script>
        const members = [
            {
                name: "Elena Popescu", 
                role: "EU Integration Specialist", 
                initials: "EP", 
                bio: "Former EU Commission advisor with Brussels experience",
                color: "#002B7F",
                focus: "EU compliance and integration",
                avatar: "https://images.unsplash.com/photo-1594736797933-d0401ba2fe65?w=150&h=150&fit=crop&crop=faces"
            },
            {
                name: "Alex Ionescu", 
                role: "Digital Technology Expert", 
                initials: "AI", 
                bio: "Tech entrepreneur and MIT graduate",
                color: "#4A90E2",
                focus: "Technology feasibility and digital innovation",
                avatar: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=faces"
            },
            {
                name: "Maria Dumitrescu", 
                role: "Regional Development Advocate", 
                initials: "MD", 
                bio: "Rural development economist from Maramure»ô",
                color: "#8B4513",
                focus: "Rural vs urban balance",
                avatar: "https://images.unsplash.com/photo-1580489944761-15a19d654956?w=150&h=150&fit=crop&crop=faces"
            },
            {
                name: "Radu Constantin", 
                role: "Economic Advisor", 
                initials: "RC", 
                bio: "Former McKinsey partner and National Bank advisor",
                color: "#FFD700",
                focus: "Budget analysis and economic impact",
                avatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=faces"
            },
            {
                name: "Ana Gheorghe", 
                role: "Citizen Voice Representative", 
                initials: "AG", 
                bio: "Civil society leader and former ombudsman",
                color: "#E74C3C",
                focus: "Public impact and accessibility",
                avatar: "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=faces"
            }
        ];

        // Chairman data
        const chairman = {
            name: "Mircea Codrescu",
            title: "Council Chairman & Final Arbiter",
            initials: "MC",
            avatar: "https://images.unsplash.com/photo-1556157382-97eda2d62296?w=150&h=150&fit=crop&crop=faces"
        };

        let sessionData = {};
        let transcriptEntries = [];

        // Cross-discussion scenarios
        const discussionScenarios = [
            {
                from: "EP", to: "AI", 
                message: "Alex, your tech focus is great, but we must ensure EU data compliance..."
            },
            {
                from: "AI", to: "MD", 
                message: "Maria, digital infrastructure can actually help rural areas - let me explain..."
            },
            {
                from: "MD", to: "RC", 
                message: "Radu, the budget numbers look good, but what about rural implementation costs?"
            },
            {
                from: "RC", to: "AG", 
                message: "Ana, citizen benefits are clear, but we need sustainable financing..."
            },
            {
                from: "AG", to: "EP", 
                message: "Elena, EU requirements are fine, but citizens need to understand them..."
            }
        ];

        // Chairman responses
        const chairmanResponses = {
            opening: "üìã Session opened. Council members, please present your initial analysis.",
            discussion: "üó£Ô∏è Facilitating cross-member discussion and debate...",
            synthesis: "‚öñÔ∏è Analyzing member positions and seeking consensus...",
            decision: "‚úÖ Final decision reached based on expert deliberation."
        };

        // Initialize the council grid
        function initializeCouncil() {
            const grid = document.getElementById('council');
            grid.innerHTML = '';
            
            members.forEach(member => {
                const card = document.createElement('div');
                card.className = 'member-card';
                card.id = `card-${member.initials}`;
                
                card.innerHTML = `
                    <div class="member-header">
                        <div class="profile-img" style="background: ${member.color};">
                            <img src="${member.avatar}" alt="${member.name}" onerror="this.style.display='none'; this.nextElementSibling.style.opacity='1';">
                            <div class="initials">${member.initials}</div>
                        </div>
                        <div class="member-info">
                            <h3>${member.name}</h3>
                            <div class="role">${member.role}</div>
                            <div class="bio">${member.bio}</div>
                        </div>
                    </div>
                    <div class="discussion-bubble" id="discussion-${member.initials}">
                        üí¨ <span id="discussionText-${member.initials}"></span>
                    </div>
                    <div class="response" id="response-${member.initials}">
                        <strong>Position:</strong> <span id="position-${member.initials}"></span><br>
                        <strong>Analysis:</strong> <span id="analysis-${member.initials}"></span>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // Simple response generation
        function generateResponse(member, issue) {
            const responses = {
                "EP": {
                    positions: ["EU compliant", "Requires Brussels review", "Supports integration"],
                    analyses: [
                        "This aligns with European standards and integration goals.",
                        "We need to ensure compliance with EU directives.",
                        "Brussels coordination will be essential for success."
                    ]
                },
                "AI": {
                    positions: ["Digitally progressive", "Needs tech upgrade", "Innovation opportunity"],
                    analyses: [
                        "Strong digital component with scalable infrastructure.",
                        "Requires modern technology stack and proper implementation.",
                        "Could position Romania as a digital leader in the region."
                    ]
                },
                "MD": {
                    positions: ["Regionally balanced", "Rural-first approach", "Equity concerns"],
                    analyses: [
                        "Must ensure equal benefits for rural and urban areas.",
                        "Bucharest-centric policies often leave villages behind.",
                        "Need decentralized implementation and local engagement."
                    ]
                },
                "RC": {
                    positions: ["Economically viable", "Budget concerns", "ROI positive"],
                    analyses: [
                        "Numbers look good with sustainable financing model.",
                        "Requires careful budget analysis and phased approach.",
                        "Strong economic fundamentals with competitive advantages."
                    ]
                },
                "AG": {
                    positions: ["Public support", "Needs consultation", "Accessibility focus"],
                    analyses: [
                        "Citizens will benefit with proper communication.",
                        "Requires extensive public consultation and feedback.",
                        "Must ensure inclusive design for all population groups."
                    ]
                }
            };

            const memberResponses = responses[member.initials];
            const position = memberResponses.positions[Math.floor(Math.random() * memberResponses.positions.length)];
            const analysis = memberResponses.analyses[Math.floor(Math.random() * memberResponses.analyses.length)];
            
            return { position, analysis };
        }


        // Transcript functions
        function addTranscriptEntry(speaker, message, avatar, type = 'discussion') {
            transcriptEntries.push({
                speaker: speaker,
                message: message,
                avatar: avatar,
                type: type,
                timestamp: new Date().toISOString()
            });
            
            const transcriptContainer = document.getElementById('transcriptEntries');
            const entry = document.createElement('div');
            entry.className = 'transcript-entry';
            
            entry.innerHTML = `
                <div class="transcript-avatar">
                    <img src="${avatar}" alt="${speaker}" onerror="this.style.display='none';">
                </div>
                <div class="transcript-message">
                    <div class="transcript-speaker">${speaker}</div>
                    <div class="transcript-text">${message}</div>
                </div>
            `;
            
            transcriptContainer.appendChild(entry);
            
            // Auto-scroll to bottom
            setTimeout(() => {
                transcriptContainer.scrollTop = transcriptContainer.scrollHeight;
            }, 100);
        }

        function addTranscriptPhase(phaseName) {
            const transcriptContainer = document.getElementById('transcriptEntries');
            const phase = document.createElement('div');
            phase.className = 'transcript-phase';
            phase.innerHTML = `<div class="transcript-phase-title">${phaseName}</div>`;
            transcriptContainer.appendChild(phase);
        }

        function toggleTranscript() {
            const content = document.getElementById('transcriptContent');
            const toggle = document.getElementById('transcriptToggle');
            
            content.classList.toggle('expanded');
            toggle.classList.toggle('expanded');
        }

        function clearTranscript() {
            document.getElementById('transcriptEntries').innerHTML = '';
            transcriptEntries = [];
        }

        // Visual discussion animation
        async function showDiscussion(from, to, message) {
            const fromCard = document.getElementById(`card-${from}`);
            const toCard = document.getElementById(`card-${to}`);
            const discussionBubble = document.getElementById(`discussion-${from}`);
            const discussionText = document.getElementById(`discussionText-${from}`);
            
            // Animate discussion line
            const discussionLine = document.getElementById('discussionLine');
            discussionLine.style.animation = 'none';
            setTimeout(() => {
                discussionLine.style.animation = 'flowDiscussion 2s ease-in-out';
            }, 10);
            
            // Highlight cards
            fromCard.classList.add('discussing');
            toCard.classList.add('responding');
            
            // Show discussion bubble
            discussionText.textContent = message;
            discussionBubble.classList.add('show');
            
            // Add to transcript
            const fromMember = members.find(m => m.initials === from);
            const toMember = members.find(m => m.initials === to);
            if (fromMember) {
                addTranscriptEntry(
                    `${fromMember.name} ‚Üí ${toMember.name}`, 
                    message, 
                    fromMember.avatar
                );
            }
            
            await new Promise(resolve => setTimeout(resolve, 3500)); // Longer duration to read
            
            // Clean up
            fromCard.classList.remove('discussing');
            toCard.classList.remove('responding');
            discussionBubble.classList.remove('show');
        }

        // Update chairman status
        function updateChairmanStatus(status) {
            document.getElementById('chairmanStatus').textContent = chairmanResponses[status];
        }

        // Main function to run the council
        async function runCouncil() {
            const issue = document.getElementById('issue').value.trim();
            if (!issue) {
                alert('Please enter a policy issue first!');
                return;
            }

            // Initialize session data
            sessionData = {
                issue: issue,
                responses: [],
                discussions: [],
                decision: null,
                timestamp: new Date().toISOString()
            };

            // Disable button
            document.getElementById('runBtn').disabled = true;
            document.getElementById('runBtn').textContent = 'Council Deliberating...';

            // Show chairman and reset state
            document.getElementById('chairman').classList.add('show');
            document.getElementById('transcript').classList.add('show');
            document.getElementById('decision').classList.remove('show');
            document.getElementById('exportBtn').classList.remove('show');
            
            // Clear previous transcript
            clearTranscript();
            
            members.forEach(member => {
                const card = document.getElementById(`card-${member.initials}`);
                card.classList.remove('thinking', 'discussing', 'responding');
                document.getElementById(`response-${member.initials}`).classList.remove('show');
                document.getElementById(`discussion-${member.initials}`).classList.remove('show');
            });

            // Phase 1: Chairman opens session
            addTranscriptPhase("üìã Session Opening");
            updateChairmanStatus('opening');
            addTranscriptEntry(
                chairman.name, 
                "Good day, council members. We are gathered to deliberate on this important policy matter. Please provide your expert analysis.",
                chairman.avatar,
                'chairman'
            );
            await new Promise(resolve => setTimeout(resolve, 2000));

            // Phase 2: Initial member analysis
            addTranscriptPhase("üí≠ Expert Analysis Phase");
            for (let i = 0; i < members.length; i++) {
                const member = members[i];
                const card = document.getElementById(`card-${member.initials}`);
                
                // Show thinking state
                card.classList.add('thinking');
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Generate and show response
                const response = generateResponse(member, issue);
                document.getElementById(`position-${member.initials}`).textContent = response.position;
                document.getElementById(`analysis-${member.initials}`).textContent = response.analysis;
                document.getElementById(`response-${member.initials}`).classList.add('show');
                
                // Add to transcript
                addTranscriptEntry(
                    member.name,
                    `Position: ${response.position}. ${response.analysis}`,
                    member.avatar,
                    'analysis'
                );
                
                // Save response
                sessionData.responses.push({
                    member: member.name,
                    role: member.role,
                    position: response.position,
                    analysis: response.analysis
                });
                
                card.classList.remove('thinking');
                await new Promise(resolve => setTimeout(resolve, 800));
            }

            // Phase 3: Cross-member discussion
            addTranscriptPhase("üó£Ô∏è Cross-Member Discussion");
            updateChairmanStatus('discussion');
            addTranscriptEntry(
                chairman.name,
                "Now I invite you to engage with each other's perspectives. Let's hear your cross-analyses.",
                chairman.avatar,
                'chairman'
            );
            await new Promise(resolve => setTimeout(resolve, 1500));

            // Show 3 random discussions
            const shuffledDiscussions = [...discussionScenarios].sort(() => 0.5 - Math.random());
            for (let i = 0; i < 3; i++) {
                const discussion = shuffledDiscussions[i];
                await showDiscussion(discussion.from, discussion.to, discussion.message);
                sessionData.discussions.push(discussion);
            }

            // Phase 4: Chairman synthesis
            addTranscriptPhase("‚öñÔ∏è Chairman Synthesis");
            updateChairmanStatus('synthesis');
            addTranscriptEntry(
                chairman.name,
                "Thank you all. I am now synthesizing your expert perspectives to reach a balanced decision.",
                chairman.avatar,
                'chairman'
            );
            await new Promise(resolve => setTimeout(resolve, 2000));

            // Phase 5: Final decision by chairman
            const decision = generateChairmanDecision();
            sessionData.decision = decision;
            updateChairmanStatus('decision');
            addTranscriptEntry(
                chairman.name,
                `Final Decision: ${decision.outcome}. ${decision.synthesis}. ${decision.rationale}`,
                chairman.avatar,
                'decision'
            );

            // Show decision
            const decisionContent = document.getElementById('decisionContent');
            decisionContent.innerHTML = `
                <div class="decision-outcome ${decision.outcome.toLowerCase().replace(/\s+/g, '-')}">${decision.outcome}</div>
                <p><strong>Chairman's Confidence:</strong> ${decision.confidence}%</p>
                <p><strong>Final Rationale:</strong> ${decision.rationale}</p>
                <p><strong>Synthesis:</strong> ${decision.synthesis}</p>
            `;
            document.getElementById('decision').classList.add('show');
            document.getElementById('exportBtn').classList.add('show');

            // Re-enable button
            document.getElementById('runBtn').disabled = false;
            document.getElementById('runBtn').textContent = 'Run Council';
        }

        // Enhanced decision generation by chairman
        function generateChairmanDecision() {
            const outcomes = ["APPROVED", "APPROVED WITH CONDITIONS", "NEEDS REVISION"];
            const outcome = outcomes[Math.floor(Math.random() * outcomes.length)];
            const confidence = Math.floor(Math.random() * 30) + 70; // 70-100%
            
            const syntheses = [
                "After careful consideration of all expert perspectives and cross-member discussions",
                "Balancing EU compliance, technological feasibility, regional equity, economic sustainability, and citizen impact",
                "Considering the robust debate between council members and their professional insights"
            ];

            const rationales = {
                "APPROVED": "The council reached consensus that this policy serves Romania's strategic interests with manageable risks.",
                "APPROVED WITH CONDITIONS": "While promising, this policy requires specific safeguards and phased implementation to succeed.",
                "NEEDS REVISION": "Significant concerns were raised that require further consultation and policy refinement."
            };

            return {
                outcome,
                confidence,
                rationale: rationales[outcome],
                synthesis: syntheses[Math.floor(Math.random() * syntheses.length)],
                timestamp: new Date().toISOString()
            };
        }

        // Export session data
        function exportSession() {
            // Include transcript in session data
            sessionData.transcript = transcriptEntries;
            const dataStr = JSON.stringify(sessionData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `romanian_council_${new Date().toISOString().slice(0,10)}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initializeCouncil);
    </script>
</body>
</html>
